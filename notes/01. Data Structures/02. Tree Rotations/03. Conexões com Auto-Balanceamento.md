# ğŸ”— ConexÃµes com Auto-Balanceamento: PolÃ­ticas de AplicaÃ§Ã£o

## ğŸ¯ VisÃ£o Geral

As **rotaÃ§Ãµes atÃ´micas** sÃ£o a **base mecÃ¢nica** de todas as Ã¡rvores auto-balanceadas. Diferentes esquemas de balanceamento (AVL, Red-Black, Splay) sÃ£o, em essÃªncia, **diferentes polÃ­ticas** que ditam quando e como aplicar estas mesmas operaÃ§Ãµes atÃ´micas.

## ğŸ”„ Diferentes PolÃ­ticas, Mesmas OperaÃ§Ãµes

### ğŸ¯ PolÃ­ticas de AplicaÃ§Ã£o

| Estrutura | Quando Aplicar | Como Aplicar | Objetivo |
|-----------|----------------|--------------|----------|
| **AVL Trees** | Fator > 1 ou < -1 | RotaÃ§Ãµes simples/duplas | Altura mÃ­nima |
| **Red-Black** | ViolaÃ§Ã£o de regras | RotaÃ§Ãµes + recolorizaÃ§Ã£o | Menos rotaÃ§Ãµes |
| **Splay Trees** | Acesso a nÃ³ | RotaÃ§Ãµes para topo | OtimizaÃ§Ã£o de acesso |

### ğŸ”„ OperaÃ§Ãµes AtÃ´micas Universais

```mermaid
graph TD
    A[RotaÃ§Ãµes AtÃ´micas] --> B[rotate_left]
    A --> C[rotate_right]
    
    B --> D[AVL Trees]
    B --> E[Red-Black Trees]
    B --> F[Splay Trees]
    
    C --> D
    C --> E
    C --> F
    
    D --> G[PolÃ­tica: Altura]
    E --> H[PolÃ­tica: Cores]
    F --> I[PolÃ­tica: Acesso]
```

## ğŸŒŸ Ãrvores AVL: PolÃ­tica de Altura

### ğŸ¯ Quando Aplicar RotaÃ§Ãµes

**CritÃ©rio:** Fator de balanceamento fora do intervalo [-1, 1]

```python
def balance_factor(node):
    return height(node.left) - height(node.right)

# Aplicar rotaÃ§Ã£o quando:
# balance_factor > 1  (desbalanceada Ã  esquerda)
# balance_factor < -1 (desbalanceada Ã  direita)
```

### ğŸ”„ Casos de RotaÃ§Ã£o AVL

#### ğŸ“Š Caso 1: Left-Left (LL)
```
    Z (fator = 2)
   /
  Y (fator = 1)
 /
X

SoluÃ§Ã£o: rotate_right(Z)
```

#### ğŸ“Š Caso 2: Right-Right (RR)
```
Z (fator = -2)
 \
  Y (fator = -1)
   \
    X

SoluÃ§Ã£o: rotate_left(Z)
```

#### ğŸ“Š Caso 3: Left-Right (LR)
```
    Z (fator = 2)
   /
  Y (fator = -1)
   \
    X

SoluÃ§Ã£o: rotate_left(Y) + rotate_right(Z)
```

#### ğŸ“Š Caso 4: Right-Left (RL)
```
Z (fator = -2)
 \
  Y (fator = 1)
 /
X

SoluÃ§Ã£o: rotate_right(Y) + rotate_left(Z)
```

### âš¡ Complexidade AVL

| OperaÃ§Ã£o | Complexidade | ExplicaÃ§Ã£o |
|----------|--------------|------------|
| **InserÃ§Ã£o** | O(log n) | MÃ¡ximo 2 rotaÃ§Ãµes |
| **RemoÃ§Ã£o** | O(log n) | MÃ¡ximo O(log n) rotaÃ§Ãµes |
| **Busca** | O(log n) | Altura garantida |

## ğŸ”´ Red-Black Trees: PolÃ­tica de Cores

### ğŸ¯ Quando Aplicar RotaÃ§Ãµes

**CritÃ©rio:** ViolaÃ§Ã£o das regras de cores Red-Black

**Regras Red-Black:**
1. NÃ³ raiz Ã© preto
2. NÃ³s vermelhos nÃ£o podem ter filhos vermelhos
3. Caminhos da raiz Ã s folhas tÃªm mesmo nÃºmero de nÃ³s pretos

### ğŸ”„ Casos de RotaÃ§Ã£o Red-Black

#### ğŸ“Š Caso 1: Tio Vermelho
```
    P (preto)
   / \
  V   T (vermelho)
 / \
N   N

SoluÃ§Ã£o: RecolorizaÃ§Ã£o (sem rotaÃ§Ã£o)
```

#### ğŸ“Š Caso 2: Tio Preto - TriÃ¢ngulo
```
    P (preto)
   /
  V (vermelho)
   \
    N (vermelho)

SoluÃ§Ã£o: rotate_left(V) + rotate_right(P)
```

#### ğŸ“Š Caso 3: Tio Preto - Linha
```
    P (preto)
   /
  V (vermelho)
 /
N (vermelho)

SoluÃ§Ã£o: rotate_right(P) + recolorizaÃ§Ã£o
```

### âš¡ Complexidade Red-Black

| OperaÃ§Ã£o | Complexidade | ExplicaÃ§Ã£o |
|----------|--------------|------------|
| **InserÃ§Ã£o** | O(log n) | MÃ¡ximo 3 rotaÃ§Ãµes |
| **RemoÃ§Ã£o** | O(log n) | MÃ¡ximo 3 rotaÃ§Ãµes |
| **Busca** | O(log n) | Altura â‰¤ 2*log(n+1) |

## ğŸ² Splay Trees: PolÃ­tica de Acesso

### ğŸ¯ Quando Aplicar RotaÃ§Ãµes

**CritÃ©rio:** Acesso a qualquer nÃ³

**Objetivo:** Mover nÃ³ acessado para a raiz

### ğŸ”„ Casos de RotaÃ§Ã£o Splay

#### ğŸ“Š Zig (nÃ³ Ã© filho da raiz)
```
    P
   /
  N

SoluÃ§Ã£o: rotate_right(P)
```

#### ğŸ“Š Zig-Zig (nÃ³ Ã© neto da raiz)
```
    G
   /
  P
 /
N

SoluÃ§Ã£o: rotate_right(G) + rotate_right(P)
```

#### ğŸ“Š Zig-Zag (nÃ³ Ã© neto da raiz)
```
    G
   /
  P
   \
    N

SoluÃ§Ã£o: rotate_left(P) + rotate_right(G)
```

### âš¡ Complexidade Splay

| OperaÃ§Ã£o | Complexidade | ExplicaÃ§Ã£o |
|----------|--------------|------------|
| **Acesso** | O(log n) amortizado | RotaÃ§Ãµes para topo |
| **InserÃ§Ã£o** | O(log n) amortizado | Splay + inserÃ§Ã£o |
| **RemoÃ§Ã£o** | O(log n) amortizado | Splay + remoÃ§Ã£o |

## ğŸ“Š ComparaÃ§Ã£o de PolÃ­ticas

### ğŸ¯ Trade-offs entre Esquemas

| Aspecto | AVL Trees | Red-Black Trees | Splay Trees |
|---------|-----------|-----------------|-------------|
| **Altura** | âœ… MÃ­nima | âš ï¸ â‰¤ 2*log(n+1) | âŒ VariÃ¡vel |
| **RotaÃ§Ãµes** | âŒ Muitas | âœ… Poucas | âš ï¸ Muitas |
| **ImplementaÃ§Ã£o** | ğŸ”§ Complexa | ğŸ”§ Complexa | ğŸ¯ Simples |
| **Performance** | âœ… Consistente | âœ… Consistente | âš ï¸ Amortizada |
| **OtimizaÃ§Ã£o** | âŒ Nenhuma | âŒ Nenhuma | âœ… Acesso frequente |

### ğŸ”„ FrequÃªncia de RotaÃ§Ãµes

```mermaid
graph LR
    A[InserÃ§Ã£o] --> B[AVL: 2 rotaÃ§Ãµes]
    A --> C[Red-Black: 3 rotaÃ§Ãµes]
    A --> D[Splay: O(log n) rotaÃ§Ãµes]
    
    E[Busca] --> F[AVL: 0 rotaÃ§Ãµes]
    E --> G[Red-Black: 0 rotaÃ§Ãµes]
    E --> H[Splay: O(log n) rotaÃ§Ãµes]
```

## ğŸ’¡ Insights Fundamentais

### ğŸ¯ 1. Universalidade das OperaÃ§Ãµes
**Mesmas rotaÃ§Ãµes atÃ´micas** usadas por diferentes polÃ­ticas de balanceamento.

### ğŸ”„ 2. PolÃ­ticas Determinam FrequÃªncia
**Quando** aplicar rotaÃ§Ãµes Ã© mais importante que **como** aplicÃ¡-las.

### âš¡ 3. Trade-offs InevitÃ¡veis
**Altura mÃ­nima** vs **menos rotaÃ§Ãµes** vs **otimizaÃ§Ã£o de acesso**.

### ğŸ¯ 4. ImplementaÃ§Ã£o Consistente
RotaÃ§Ãµes sÃ£o **operaÃ§Ãµes atÃ´micas** que podem ser reutilizadas.

## ğŸš€ ImplementaÃ§Ãµes PrÃ¡ticas

### ğŸ“ **Desafios Relacionados**

#### ğŸ”„ **RotaÃ§Ãµes BÃ¡sicas**
- `rotate_left.py` - OperaÃ§Ã£o atÃ´mica fundamental
- `rotate_right.py` - OperaÃ§Ã£o atÃ´mica fundamental

#### ğŸŒŸ **AVL Trees**
- `insert_avl.py` - InserÃ§Ã£o com balanceamento AVL
- `is_avl_tree.py` - VerificaÃ§Ã£o de propriedades AVL

#### ğŸ”´ **Red-Black Trees**
- `insert_red_black.py` - InserÃ§Ã£o com balanceamento Red-Black
- `is_valid_red_black.py` - VerificaÃ§Ã£o de propriedades Red-Black

## ğŸ¯ ConclusÃ£o

As **rotaÃ§Ãµes atÃ´micas** sÃ£o a **base mecÃ¢nica universal** que conecta todas as Ã¡rvores auto-balanceadas:

- âœ… **AVL Trees** usam rotaÃ§Ãµes para **altura mÃ­nima**
- âœ… **Red-Black Trees** usam rotaÃ§Ãµes para **menos operaÃ§Ãµes**
- âœ… **Splay Trees** usam rotaÃ§Ãµes para **otimizaÃ§Ã£o de acesso**

**LiÃ§Ã£o:** Diferentes polÃ­ticas de balanceamento sÃ£o **diferentes estratÃ©gias** para aplicar as **mesmas operaÃ§Ãµes atÃ´micas** fundamentais. 